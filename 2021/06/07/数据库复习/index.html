

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Alice">
  <meta name="keywords" content="">
  <title>Welcome to Alice&#39;s BLOG</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
    
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="Welcome to Alice's BLOG" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Alice</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-06-07 10:17" pubdate>
        June 7, 2021 am
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      9.1k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      94
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none"></h1>
            
            <div class="markdown-body" id="post-body">
              <h1 id="数据库技术"><a href="#数据库技术" class="headerlink" title="数据库技术"></a>数据库技术</h1><h2 id="第一章-（概念）"><a href="#第一章-（概念）" class="headerlink" title="第一章 （概念）"></a>第一章 （概念）</h2><h3 id="数据库技术-1"><a href="#数据库技术-1" class="headerlink" title="数据库技术"></a>数据库技术</h3><ol>
<li>数据库技术一般包括 <u>数据管理</u> 和 <u>数据处理</u> 两部分</li>
<li>数据库技术主要研究内容是如何对数据进行科学的管理，以提供：<u>可共享、安全、可靠的数据</u></li>
</ol>
<h3 id="数据库系统"><a href="#数据库系统" class="headerlink" title="数据库系统"></a>数据库系统</h3><ol>
<li>本质上是一个用 <u>计算机存储数据的系统</u></li>
<li>除保存数据外。还对数据进行各种 <u>管理和处理</u>：<ul>
<li>安全管理</li>
<li>数据共享</li>
<li>数据查询</li>
</ul>
</li>
</ol>
<h3 id="数据库基本概念"><a href="#数据库基本概念" class="headerlink" title="数据库基本概念"></a>数据库基本概念</h3><ol>
<li>四个基本概念<ul>
<li>数据</li>
<li>数据库系统</li>
<li>数据库</li>
<li>数据库管理系统</li>
</ul>
</li>
<li><u>数据</u> 是数据库中的存储的 <u>基本对象</u></li>
<li><u>数据</u>：<ul>
<li>描述事物的符号记录</li>
</ul>
</li>
<li><u>数据的种类</u>：<ul>
<li>文本、图像、图形、音频、视频、等</li>
</ul>
</li>
<li>数据的含义称为数据的 <u>语义</u> ， 数据与其语义 <u>不可分割</u></li>
</ol>
<h3 id="事物的描述"><a href="#事物的描述" class="headerlink" title="事物的描述"></a>事物的描述</h3><ol>
<li><p>日常生活用 <u>自然语言</u> 描述事物</p>
<p>如一门课的信息： 数据存储课程，4个学分，第4学期开设。</p>
<p><u>记录表示</u>： （数据存储， 4， 4）</p>
</li>
</ol>
<h3 id="数据库系统-1"><a href="#数据库系统-1" class="headerlink" title="数据库系统"></a>数据库系统</h3><p>数据库系统是：</p>
<ul>
<li>由数据库、数据库管理系统（及相关使用工具）</li>
<li>应用程序、数据库管理员组成的存储、管理、处理和维护数据的系统</li>
</ul>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ol>
<li><p>数据库概念</p>
<ol>
<li>一个含有 大量数据，可能被许多部门和用户同时使用的 大数据集</li>
<li>是存放数据的仓库</li>
<li><u> 永久存储</u> 在计算机存储设备上</li>
<li>按一定的格式存储</li>
<li><u> 是有组织</u>、<u>可共享</u> 的大量数据的集合</li>
</ol>
</li>
<li><p>—： </p>
<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521104724770.png" srcset="/img/loading.gif" alt="image-20210521104724770"></li>
</ul>
</li>
<li><p>三个基本特点</p>
<ol>
<li>永久存储</li>
<li>有组织</li>
<li>可共享</li>
</ol>
</li>
</ol>
<h3 id="数据库管理系统"><a href="#数据库管理系统" class="headerlink" title="数据库管理系统"></a>数据库管理系统</h3><ul>
<li>是一个专门用于实现对数据进行管理和维护的 <u>系统软件</u></li>
<li>是一个与永用户的应用程序和数据库相互作用的软件</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521105254316.png" srcset="/img/loading.gif" alt="image-20210521105254316"></p>
<h3 id="DBMS"><a href="#DBMS" class="headerlink" title="DBMS"></a>DBMS</h3><ul>
<li>数据库的建立和维护功能<ul>
<li>数据库初始数据装载 转换</li>
<li>数据库转储</li>
<li>介质故障恢复</li>
<li>数据库的重组织</li>
<li>性能监视分析</li>
</ul>
</li>
<li>数据库的事物管理和运行管理<ul>
<li>数据库在建立、运行和维护的时由 <u>DBMS</u> 统一 <u>管理</u> 和 <u>控制</u></li>
<li>保证数据的安全性、完整性、多用户对数据的并发使用</li>
<li>发生故障后的系统恢复</li>
</ul>
</li>
</ul>
<h3 id="数据库管理技术发展"><a href="#数据库管理技术发展" class="headerlink" title="数据库管理技术发展"></a>数据库管理技术发展</h3><ul>
<li>人工管理 1940 + 10</li>
<li>文件系统 1950 + 10</li>
<li>数据库系统 1960 - now</li>
</ul>
<h3 id="数据库管理的优点"><a href="#数据库管理的优点" class="headerlink" title="数据库管理的优点"></a>数据库管理的优点</h3><ul>
<li><p>相互关联的数据的集合</p>
</li>
<li><p>较少的数据冗余</p>
</li>
<li><p>程序与数据 <u>相互独立</u> </p>
<ul>
<li><p>数据独立性是指数据的组织与存储方法和应用程序互不依赖、彼此独立</p>
</li>
<li><p><strong>应用程序不会因数据的物理表示方式和访问技术的改变而改变</strong></p>
</li>
<li><p><strong>即应用程序不依赖于任何特定的物理表示方式和访问技术</strong></p>
<ul>
<li><p><strong>逻辑独立性</strong></p>
<ul>
<li><p>指当表达现实世界的信息内容发生变化时，如：</p>
<ul>
<li><p>增加信息</p>
</li>
<li><p>删除无用信息等</p>
</li>
</ul>
</li>
<li><p>不影响 <u>应用程序</u> 的特性。</p>
</li>
</ul>
</li>
<li><p>物理独立性</p>
<ul>
<li>指当数据的存储位置或存储结构发生变化时，不影响 <u>应用程序</u> 的特性</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>保证数据的安全、可靠</p>
<ul>
<li>数据库技术要能够保证数据库中的数据是安全可靠的：<ul>
<li>主动安全<ul>
<li>防止非法使用</li>
</ul>
</li>
<li>被动安全<ul>
<li>完全恢复</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>最大限度的保证数据的 <u>正确性</u></p>
<ul>
<li>数据完整性</li>
</ul>
</li>
<li><p>数据可以并发使用并能保证 <u>一致性</u></p>
<ul>
<li>多用户使用数据库，<u>能不产生冲突矛盾</u>，保证顺一致性和正确性</li>
</ul>
</li>
</ul>
<h3 id="数据库系统的组成"><a href="#数据库系统的组成" class="headerlink" title="数据库系统的组成"></a>数据库系统的组成</h3><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521111019119.png" srcset="/img/loading.gif" alt="image-20210521111019119"></p>
<h2 id="第二章-（数据模型、数据库结构）"><a href="#第二章-（数据模型、数据库结构）" class="headerlink" title="第二章 （数据模型、数据库结构）"></a>第二章 （数据模型、数据库结构）</h2><h3 id="数据与信息"><a href="#数据与信息" class="headerlink" title="数据与信息"></a>数据与信息</h3><ol>
<li><u>数据</u> 描述事物的 <u>符号记录</u></li>
<li><u>信息</u> 从数据中获取的有意义的内容</li>
<li>数据的语法（规定数据的格式），数据的语义（数据的含义）</li>
<li>数据是信息存在的一种形式，只有通过解释或处理才能成为有用信息</li>
</ol>
<h3 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h3><ul>
<li><p>数据模型是对现实世界数据特征的抽象（现实世界的模拟）</p>
</li>
<li><p>在数据库中用数据模型这个工具来 <u>抽象、表示以及处理</u>现实世界中的数据和信息</p>
</li>
<li><p>数据模型应满足：</p>
<ul>
<li>能比较真实的模拟现实世界</li>
<li>容易被人理解</li>
<li>便于在计算机上实现</li>
</ul>
</li>
<li><p>数据模型分两类</p>
<ul>
<li><u>概念层模型</u></li>
<li><u>组织层模型</u><ul>
<li><u>逻辑模型</u></li>
<li><u>物理模型</u></li>
</ul>
</li>
</ul>
</li>
<li><p>客观对象抽象过程 2步</p>
<ul>
<li><p>现实世界中的客观对象抽象为 <u>概念模型</u></p>
</li>
<li><p>把 <u>概念模型</u> 转换为某一DBMS支持的数据模型</p>
</li>
</ul>
</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521112236559.png" srcset="/img/loading.gif" alt="image-20210521112236559"></p>
<h3 id="重点：-ER图"><a href="#重点：-ER图" class="headerlink" title="重点： ER图"></a>重点： ER图</h3><ol>
<li>实体-联系方法使用的工具称为E-R图</li>
<li>把这种描述结果称为e-r模型</li>
</ol>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521112421712.png" srcset="/img/loading.gif" alt="image-20210521112421712"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521112433604.png" srcset="/img/loading.gif" alt="image-20210521112433604"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521112446891.png" srcset="/img/loading.gif" alt="image-20210521112446891"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521112459042.png" srcset="/img/loading.gif" alt="image-20210521112459042"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521112512620.png" srcset="/img/loading.gif" alt="image-20210521112512620"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521112526238.png" srcset="/img/loading.gif" alt="image-20210521112526238"></p>
<h4 id="联系的说明"><a href="#联系的说明" class="headerlink" title="联系的说明"></a>联系的说明</h4><ul>
<li><p>一对一联系时一对多联系的特例，二一对多又是多对多的特例</p>
</li>
<li><p>实体之间联系的种类与 <u>语义</u>直接相关</p>
</li>
<li><p>例子：</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210524114911044.png" srcset="/img/loading.gif" alt="image-20210524114911044"></p>
</li>
</ul>
<h3 id="组织层数据模型"><a href="#组织层数据模型" class="headerlink" title="组织层数据模型"></a>组织层数据模型</h3><ul>
<li>最重要的一种数据模型： <u>关系数据模型</u></li>
<li><u>关系数据库</u> 采用 <u>关系数据模型</u> 作为数据 <u>组织方式</u></li>
<li>关系数据模型源于 <u>数学</u> 把数据看作 <u>二维表</u> 中的元素，二维表在关系数据库中称为 <u>关系</u></li>
<li>关系数据库的 <u>数据模型</u> 为 <u>二维表</u></li>
</ul>
<h4 id="数据模型三要素"><a href="#数据模型三要素" class="headerlink" title="数据模型三要素"></a>数据模型三要素</h4><ul>
<li>数据结构 -&gt; 描述 <u>数据库</u> 组成对象 和 对象 之间的联系</li>
<li>数据操作 -&gt;查询和更新</li>
<li>数据的完整性约束条件</li>
</ul>
<h3 id="数据库结构（模式）"><a href="#数据库结构（模式）" class="headerlink" title="数据库结构（模式）"></a>数据库结构（模式）</h3><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210524115729076.png" srcset="/img/loading.gif" alt="image-20210524115729076"></p>
<ul>
<li><u>数据模型</u>： （组织层数据模型）时描述数据的组织形式</li>
<li><u>模式</u> （数据库系统结构中间层）是用给定的数据模型 对 具体数据的描述， 无物理存储<ul>
<li>模式一定是关系的，实际上是数控数据在逻辑级上的 <u>视图</u></li>
<li>一个数据库只有 <u>一种模式</u></li>
<li>外模式 是关系的，内容来自内模式</li>
<li>内模式 （存储模式）不是关系的，是数据物理存储方式</li>
</ul>
</li>
<li>类似用编程语言写具体应用程序</li>
<li><u>关系模型</u> 是关系的 <u>型</u> 或元组的 <u>结构共性</u> 的描述</li>
<li>模式的一个具体值称模式的一个 <u>实例</u></li>
<li>比如： 表中的每一行数据就是一个具体实例</li>
<li>模式： <u>相对稳定</u></li>
<li>实例： <u>相对变动</u></li>
<li><strong>模式映象与数据独立性</strong><ul>
<li>外模式/模式映象<ul>
<li>当模式改变，可用 外模式/<u>模式</u> 定义语句，调整 <u>外模式</u>/模式 映象定义， <u>保持外模式不变</u></li>
<li><u>数据和程序逻辑独立</u></li>
</ul>
</li>
<li>模式/内模式映象<ul>
<li>当存储结构改变，可（由DBA）用 <u>内模式</u> 定义语句，调整 <u>内模式</u>定义，从而保持模式不变</li>
<li>数据和程序物理独立（存储独立）</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>小结</p>
<p>​    <img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210524121145812.png" srcset="/img/loading.gif" alt="image-20210524121145812"></p>
</li>
</ul>
<h2 id="第三章-（关系数据库）"><a href="#第三章-（关系数据库）" class="headerlink" title="第三章 （关系数据库）"></a>第三章 （关系数据库）</h2><h3 id="1-关系模型"><a href="#1-关系模型" class="headerlink" title="1. 关系模型"></a>1. 关系模型</h3><p><u>关系模型三要素</u>：</p>
<ul>
<li>数据结构</li>
<li>操作集合</li>
<li>完整性约束</li>
</ul>
<h3 id="2-数据结构"><a href="#2-数据结构" class="headerlink" title="2. 数据结构"></a>2. 数据结构</h3><ul>
<li><p>二维表组织数据</p>
</li>
<li><p>二维表在关系数据库中称为 <u>关系</u></p>
</li>
<li><p>关系数据库就是 <u>表</u> 或说是 <u>关系的集合</u></p>
</li>
<li><p>表是 <u>逻辑结构</u> 而不是物理结构</p>
</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210524215814206.png" srcset="/img/loading.gif" alt="image-20210524215814206"></p>
<h3 id="3-数据操作"><a href="#3-数据操作" class="headerlink" title="3. 数据操作"></a>3. 数据操作</h3><ul>
<li>关系数据模型中的操作：</li>
<li><u>传统的关系运算</u>：并、差、交、广义笛卡儿积</li>
<li><u>专门的关系运算</u>：选择、投影、连接、除</li>
<li><u>有关的数据操作</u>：查询、插入、删除、更改</li>
</ul>
<h3 id="4-数据完整性约束"><a href="#4-数据完整性约束" class="headerlink" title="4. 数据完整性约束"></a>4. 数据完整性约束</h3><ul>
<li><p>数据的完整性是指保证数据正确性的特征</p>
</li>
<li><p>数据完整性是一种 <u>语义概念</u>， 包括：</p>
<ul>
<li>与 <u>现实世界中应用需求</u> 的数据的相容性和正确性</li>
<li><u>数据库内</u> 数据之间的 <u>相容性和正确性</u></li>
</ul>
</li>
<li><p><u>数据完整性</u> 是由一组完整性规则定义、关系模型的完整性规则是对关系的某种约束条件</p>
</li>
<li><p>关系数据模型中 <u>数据完整性分三类</u></p>
<ul>
<li>实体完整性<ul>
<li>保证关系中的每个元组 <u>可识别</u>、<u>唯一</u></li>
<li>关系数据库中所有的表必须 <u>有主键</u>，表中不允许存在如下记录：<ul>
<li>无主键的记录</li>
<li>主键值相同的记录 </li>
</ul>
</li>
</ul>
</li>
<li>参照（引用）完整性<ul>
<li>实体与实体间的联系由关系来表示，关系和关系间存在引用</li>
<li>描述实体间的联系</li>
<li><u>多个实体</u> 或 <u>关系之间</u> 的关联关系</li>
<li>定义外键与被参照的主键之间的引用规则</li>
<li>外键一般应符合如下要求<ul>
<li>值为空</li>
<li>等于其所参照的关系中的某个元组的主键值</li>
</ul>
</li>
<li>外键定义：<ul>
<li>设F是关系R的一个或一组 <u>属性</u>，如果F与关系S的 <u>主键相对应</u>，则称F是关系R的外键（Foreign Key），并称关系R <u>为参照关系</u>，关系S为 <u>被参照关系</u>。关系R与S不一定是不同的关系</li>
</ul>
</li>
</ul>
</li>
<li>用户定义完整性<ul>
<li>域完整性 或 语义完整性</li>
<li>针对 <u>某一具体应用领域</u> 定义的数据约束条件</li>
<li>反应某一具体应用所涉及的数据必须满足应用语义的要求</li>
<li>指明关系中 <u>属性的取值范围</u>，防止 <u>属性的值与应用语义矛盾</u></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-基本术语"><a href="#5-基本术语" class="headerlink" title="5. 基本术语"></a>5. 基本术语</h3><ul>
<li><p>关系： 关系就是二维表，二维表的名字就是关系的名字</p>
</li>
<li><p>属性：二维表中的每个列就称为一个属性（字段）</p>
<ul>
<li>属性名</li>
<li>属性值（某一列的值）</li>
<li>列的个数（关系的元数）。一个二维表有n列，则称其为n元关系</li>
</ul>
</li>
<li><p>值域：二维表中属性的取值范围称为值域</p>
</li>
<li><p>分量：元组中的每一个属性值称为元组的一个分量</p>
<ul>
<li><p>n元关系的每个元组有n个分量</p>
</li>
<li><p>例：</p>
<ul>
<li>（0811101，李勇，21，男，计算机系），有5个分量</li>
</ul>
</li>
</ul>
</li>
<li><p>关系模式</p>
<ul>
<li>关系模式： 二维表的结构</li>
<li>设由关系名为R， 属性分别为 A1，A2……则关系模式为：<ul>
<li>R（A1，A2，…,An）</li>
</ul>
</li>
<li>如果将关系模式理解为 <u>数据类型</u>，则 <u>关系</u> 就是该 <u>数据类型的一个具体值</u>。</li>
</ul>
</li>
<li><p>关系数据库：</p>
<ul>
<li>一个 <u>关系数据库</u> 的 <u>所有关系的集合</u> </li>
</ul>
</li>
<li><p>候选键</p>
<ul>
<li>一个属性或属性集的值能唯一标识一个关系的元组儿不包含多余的属性，则称该属性或属性集为候选键</li>
</ul>
</li>
<li><p>主键</p>
<ul>
<li>当一个关系中 <u>有多个候选键</u> 时，从中选一个作为主键<ul>
<li>每个关系只能有一个主键或主关键字，用于唯一地确定一个元组</li>
<li>主键可以由一个属性组成，也可以由多个属性组成</li>
</ul>
</li>
<li>主属性：包含在任一候选键中的 <u>属性称为主属性</u></li>
<li>非主属性：不包含。。</li>
<li>作用：<ul>
<li>表中定义了 <u>主键</u> 时，<u>数据库管理系统</u> 会 自动保证数据的 <u>实体完整性</u>，也即 保证不允许存在主键值 <u>为空</u> 的记录 以及 <u>主键值重复的记录</u></li>
<li><u>空值</u> 是特殊的 <u>标量常数</u>， 代表 <u>未定义</u>的或者有意义但目前还处于 <u>未知状态的值</u>。</li>
</ul>
</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527200629251.png" srcset="/img/loading.gif" alt="image-20210527200629251"></p>
</li>
<li><p>对关系的限定：</p>
<ul>
<li>关系中每个分量都是 <u>不可再分的最小属性</u></li>
<li>表中列的数据类型是固定的</li>
<li>不同列的数据可以取自相同值域</li>
<li>关系表中 <u>行、列的顺序不重要</u></li>
<li>同一关系中的元组不能重复</li>
</ul>
</li>
</ul>
<h2 id="第四章-（Sql语言基础）"><a href="#第四章-（Sql语言基础）" class="headerlink" title="第四章 （Sql语言基础）"></a>第四章 （Sql语言基础）</h2><h3 id="1-功能概述："><a href="#1-功能概述：" class="headerlink" title="1. 功能概述："></a>1. 功能概述：</h3><ul>
<li>四部分：<ul>
<li>数据 <u>定义</u> 功能、 create、drop、alter</li>
<li>数据 <u>控制</u> 功能、grant、 revoke、deny</li>
<li>数据 <u>查询</u> 功能 、select </li>
<li>数据 <u>操纵</u> 功能、insert、update、delete</li>
</ul>
</li>
</ul>
<h3 id="2-数据类型"><a href="#2-数据类型" class="headerlink" title="2. 数据类型"></a>2. 数据类型</h3><ul>
<li>数值型<ul>
<li>准确型：在计算机中能精确存储的数据<ul>
<li>整数： Bigint 8、Int 4、Smallint 2、Tinyint 1、Bit （1位)</li>
<li>小数：numeric、decimal（p[数字位长度]、q[小数位长度]）</li>
</ul>
</li>
</ul>
</li>
<li>字符串型<ul>
<li>字符串类型由 <u>汉字</u>、<u>英文字母</u>、<u>数字和各种符号组成</u></li>
<li>编码方式<ul>
<li>二进制字符串类型</li>
<li>普通编码字符串类型</li>
<li>统一字符编码字符串类型（Unicode）</li>
<li>Char（8000） 定长存储</li>
<li>Varchar（8000） 不定长存储</li>
<li>Varchar(max)存储大于8000字节文本</li>
<li>nchar（4000）定长存储</li>
<li>nvarchar（4000）不定长存储</li>
<li>Nvarchar（max）…</li>
<li>所有语言中存在的字符均采用 <u>双字节编码</u></li>
</ul>
</li>
</ul>
</li>
<li>日期时间类型<ul>
<li>Datetime 8      年月日时分秒毫秒     <strong>2001/08/03 10:30:00.000</strong><ul>
<li>存储从1735.1.1 - 9999.12.31</li>
</ul>
</li>
<li>SmallDateTime 4      年月日时分      <strong>2001/08/03 10:30:00</strong><ul>
<li>存储从1900.1.1 - 2079.6.6</li>
</ul>
</li>
<li>Date 3 定义一个日期，范围为0001-01-01，默认格式：YYYY-MM-DD</li>
<li>Time 3~5 定义一天中的某个时间<ul>
<li>默认格式：hh：mm：ss[.0000000]</li>
<li>范围: 00:00:00.0000000到23:59:59:9999999</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-基本概念"><a href="#3-基本概念" class="headerlink" title="3. 基本概念"></a>3. 基本概念</h3><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527204951125.png" srcset="/img/loading.gif" alt="image-20210527204951125"></p>
<ul>
<li><p>基本表</p>
<ul>
<li>本身独立存在的表</li>
<li>Sql中一个关系就对应一个基本表</li>
<li>一个（多个）基本表对应一个存储文件</li>
<li>一个表可以带若干索引</li>
</ul>
</li>
<li><p>存储文件</p>
<ul>
<li><u>逻辑结构</u> 组成了关系数据库的 <u>内模式</u></li>
<li><u>物理结构</u> 对用户是隐蔽的</li>
</ul>
</li>
<li><p>视图</p>
<ul>
<li>从一个或几个基本表导出的表</li>
<li>数据库中只存放视图的定义而不存放视图对应的数据</li>
<li>视图是一个虚表</li>
<li>用户可以在视图上再定义视图</li>
</ul>
</li>
</ul>
<h3 id="4-数据定义"><a href="#4-数据定义" class="headerlink" title="4. 数据定义"></a>4. 数据定义</h3><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527205430823.png" srcset="/img/loading.gif" alt="image-20210527205430823"></p>
<ul>
<li><p>架构的基本概念</p>
<ul>
<li><p>架构（schema，也称为模式），数据库下的一个 <u>逻辑命名空间</u></p>
</li>
<li><p>可以存放 <u>表</u>、<u>视图</u> 等数据库对象</p>
</li>
<li><p><u>一个数据库对象的容器</u></p>
</li>
<li><p>数据库比喻为操作系统，架构为其目录，架构中对象相当于文件</p>
</li>
<li><p>如果没有指定架构名，架构名隐含为用户名</p>
</li>
<li><p>一个用户可以拥有多个架构</p>
</li>
<li><p>执行创建架构语句（ <strong>CREATE SCHEMA [&lt;架构名&gt;]</strong> </p>
<pre><code>**AUTHORIZATION &lt;用户名&gt;**）</code></pre><p>需要管理员权限或<strong>CREATE SCHEMA</strong>权限</p>
</li>
<li><p><strong>DROP SCHEMA &lt;</strong>架构名<strong>&gt;</strong> </p>
<pre><code>**&#123; &lt;CASCADE&gt; | &lt;RESTRICT&gt; &#125;**</code></pre><ul>
<li>CASCADE：删除架构的同时将该架构中所有的对象一起删除。</li>
<li>RESTRICT：如果被删除的架构中包含对象，则拒绝删除此架构</li>
</ul>
</li>
</ul>
</li>
<li><p>基本表</p>
</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527210120188.png" srcset="/img/loading.gif" alt="image-20210527210120188"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527210143549.png" srcset="/img/loading.gif" alt="image-20210527210143549"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527210204409.png" srcset="/img/loading.gif" alt="image-20210527210204409"></p>
<h2 id="第六章-索引和视图"><a href="#第六章-索引和视图" class="headerlink" title="第六章  (索引和视图)"></a>第六章  (索引和视图)</h2><h3 id="1-索引的存储结构与分类"><a href="#1-索引的存储结构与分类" class="headerlink" title="1. 索引的存储结构与分类"></a>1. 索引的存储结构与分类</h3><ul>
<li>聚集索引<ul>
<li>将数据按照索引项的顺序进行物理排序</li>
<li>B+树按照 <u>自下而上</u>建立,最下层的叶级节点存放数据,它同时页是数据页</li>
<li>多个 <em>数据页</em> 生成一个中间层节点的索引页,然后再由多个中间层节点的索引页合成更上层的索引页</li>
<li>如此上推,直到生成顶层跟节点的 <em>索引页</em></li>
<li>在聚集索引的叶节点中，数据按聚集索引项的值进行物理排序</li>
<li>因此，聚集索引很类似于电话号码簿</li>
<li>一个表只能包含一个聚集索引,一个索引可以由多个列组成</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527211635300.png" srcset="/img/loading.gif" alt="image-20210527211635300"></li>
</ul>
</li>
<li>非聚集索引<ul>
<li>不对数据物理排序</li>
<li>非聚集索引与图书后边的术语表类似。数据存储在一个地方，术语表存储在另一个地方。而且数据并不按术语表的顺序存放，但术语表中的每个词在书中都有确切的位置</li>
<li>非聚集索引就类似于术语表，而数据就类似于一本书的内容</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527211948237.png" srcset="/img/loading.gif" alt="image-20210527211948237"></li>
</ul>
</li>
<li>相同点:<ul>
<li>都使用 <u>B+</u>树结构存储索引项</li>
<li>包含数据页和索引页</li>
<li>索引页用来存放索引项和指向下一层的指针</li>
</ul>
</li>
<li>非聚类索引和聚类索引的不同点<ul>
<li>数据 <u>不按非聚集索引</u> 关键字值 的 顺序 <u>排序和存储</u></li>
<li>叶级节点不是存放数据的数据页</li>
<li>非聚集索引B+树的 <u>叶级节点是</u> <u>索引行</u>。每个索引行包含非聚集索引关键字值以及一个或多个行定位器，这些行定位器指向该关键字值对应的数据行（如果索引不唯一，则可能是多行）</li>
</ul>
</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210527211843045.png" srcset="/img/loading.gif" alt="image-20210527211843045" style="zoom:40%;" />

</li>
</ul>
<img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210527212159743.png" srcset="/img/loading.gif" alt="image-20210527212159743 " style="zoom:40%;" />

<img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210527212223339.png" srcset="/img/loading.gif" alt="image-20210527212223339 " style="zoom:40%;" />



<h3 id="2-创建索引"><a href="#2-创建索引" class="headerlink" title="2. 创建索引"></a>2. 创建索引</h3><ul>
<li><p>CREATE [UNIQUE] [CLUSTERED|NONCLUSTERED]</p>
<p> <strong>INDEX</strong> <strong>索引名</strong> <strong>ON</strong> 表名(列名 <strong>[,…n])</strong></p>
</li>
<li><p>UNIQUE:唯一索引</p>
</li>
<li><p>CLUSTERED:聚类索引</p>
</li>
<li><p>NONCLUSTERED:非</p>
</li>
<li><p>默认非聚类</p>
</li>
<li><p>删除:<br> DROP INDEX &lt;表名&gt;.&lt;索引名&gt;</p>
</li>
</ul>
<h3 id="3-视图"><a href="#3-视图" class="headerlink" title="3. 视图"></a>3. 视图</h3><ul>
<li>视图是由 <u>从数据库的基本表</u> 中选取出来的 <u>数据</u> 组成的 <u>逻辑窗口</u>，</li>
<li>是 <u>基本表的部分行和列数据的组合</u>。</li>
<li>视图是一个 <u>虚表</u>。</li>
<li>数据库中只存储 <u>视图的定义</u>，而 <u>不存储</u> 视图所包含的 <u>数据</u>。</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527212852513.png" srcset="/img/loading.gif" alt="image-20210527212852513"></p>
<ul>
<li><p>定义视图 </p>
<p> CREATE VIEW &lt;视图名&gt;[(视图列名表)]</p>
<pre><code>AS  查询语句</code></pre><ul>
<li>查询语句通常不包括:<ul>
<li>order by 和 distinct</li>
</ul>
</li>
<li>在定义视图时要么指定视图的全部列名，要么全部省略不写</li>
<li>视图的数据源可以来自其它的视图。</li>
</ul>
</li>
<li><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527213129400.png" srcset="/img/loading.gif" alt="image-20210527213129400"></p>
</li>
<li><p>对视图的查询如同基本表</p>
</li>
<li><p>可以通过视图修改基本表中的数据</p>
<ul>
<li><p>并不是所有的视图都可以用于修改数据。</p>
<ul>
<li>如经过统计或表达式计算得到的视图</li>
</ul>
</li>
<li><p>能否通过视图修改数据的基本原则：</p>
<ul>
<li>这个操作能够最终落实到基本表上，并成为对基本表的正确操作，则可以</li>
</ul>
</li>
<li><p>有些复杂的查询，特别是统计函数和普通列一起进行的查询，在一个查询语句中是无法实现的，这时可以借助视图通过分步骤的方法来实现。</p>
</li>
</ul>
</li>
<li><p>修改和删除视图</p>
<ul>
<li>修改:<ul>
<li>ALTER VIEW  &lt;视图名&gt;<br>  [ ( &lt;列名&gt; [ ,…n ] ) ]<br>AS<br>   SELECT语句</li>
</ul>
</li>
<li>删除<ul>
<li>DROP VIEW &lt;视图名&gt;</li>
</ul>
</li>
</ul>
</li>
<li><p>视图的作用:</p>
<ul>
<li>简化数据查询语句  </li>
<li>使用户能从多角度看待同一数据 </li>
<li>提高了数据的安全性 </li>
<li>提供了一定程度的逻辑独立性 </li>
</ul>
</li>
</ul>
<h3 id="4-触发器"><a href="#4-触发器" class="headerlink" title="4. 触发器"></a>4. 触发器</h3><ul>
<li>是一段由对数据的更改操作引发的自动执行的代码。更改操作包括：UPDATE、INSERT、DELETE<br>通常用于保证业务规则和数据完整性<br>主要优点是用户可以用编程的方法实现复杂的处理逻辑和商业规则，增强了数据完整性约束的功能</li>
<li>创建:<br><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527213722047.png" srcset="/img/loading.gif" alt="image-20210527213722047"></li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527213745458.png" srcset="/img/loading.gif" alt="image-20210527213745458"></li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527213802580.png" srcset="/img/loading.gif" alt="image-20210527213802580"></li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527213821615.png" srcset="/img/loading.gif" alt="image-20210527213821615"></li>
<li>删除触发器:<br>DROP TRIGGER 触发器名</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210527213859712.png" srcset="/img/loading.gif" alt="image-20210527213859712"></li>
</ul>
<h2 id="第八章-关系规范化"><a href="#第八章-关系规范化" class="headerlink" title="第八章 (关系规范化)"></a>第八章 (关系规范化)</h2><h3 id="1-数据依赖"><a href="#1-数据依赖" class="headerlink" title="1. 数据依赖"></a>1. 数据依赖</h3><ul>
<li>数据表中数据的问题：<ul>
<li>数据冗余</li>
<li>数据更新</li>
<li>数据插入</li>
<li>数据删除</li>
</ul>
</li>
<li>结论：<ul>
<li>S-L-C 关系模式不是一个好模式</li>
<li>解决方案：<br>模式分解：把一个 <u>关系模式</u> 分解为两个或多个关系模式， 分解过程中消除 “不良”函数依赖</li>
</ul>
</li>
</ul>
<h3 id="2-范式"><a href="#2-范式" class="headerlink" title="2. 范式"></a>2. 范式</h3><ul>
<li><p>关系规范化：  将“不良”函数依赖的关系模式转换为良好的关系模式的 理论</p>
</li>
<li><p>范式： （关系模式遵守的规则）</p>
<ul>
<li><p>关系数据库中关系需满足一定要求，满足不同程度要求的为不同的 <u>范式</u></p>
</li>
<li><p>第一 ~ 五 范式（1~5 NF（Normal Form））BC范式</p>
</li>
<li><p>范式间关系：<br><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210601205544678.png" srcset="/img/loading.gif" alt="image-20210601205544678"></p>
</li>
<li><p>1NF：</p>
<ul>
<li>不包含非原子项属性的关系</li>
</ul>
</li>
<li><p>2BF：</p>
<ul>
<li>定义  如果R(U,F)∈1NF，且R中的 <u>每个非主属性都完全函数依赖于主键</u>， 则R(U,F)∈2NF。</li>
<li>可知：若某个第一范式关系的主键只由一个列组成，则这个关系就是第二范式关系。</li>
<li>分解方法：<ul>
<li>（1）用 <u>组成主键的属性集合</u> 的每一个 <u>子集</u> 作为 <u>主键</u> 构成的一个关系</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210601210109950.png" srcset="/img/loading.gif" alt="image-20210601210109950 " style="zoom:50%;" /></li>
<li>（2）将 依赖于这些 <u>主键的属性</u> 放置到 <u>相应的关系</u> 中</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210601210136010.png" srcset="/img/loading.gif" alt="image-20210601210136010" style="zoom:50%;" /></li>
<li>（3）最后 <u>去掉只由 主键的子集 构成的关系</u></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210601210150684.png" srcset="/img/loading.gif" alt="image-20210601210150684 " style="zoom:50%;" />
</li>
</ul>
</li>
</ul>
</li>
<li><p>3BF:</p>
<ul>
<li><p>定义:如果R(U,F )∈2NF，且 <u>所有非主属性</u> 都 <u>不传递依赖于主键</u> ，则R(U,F )∈3NF。</p>
</li>
<li><p>S-L(Sno,Sname,Ssex,Sdept,SLOC) ∵Sno→Sdept，Sdept→Sloc </p>
<p>∴有Sno   –&gt;(传递)  SLOC,</p>
</li>
<li><p>分解方法：</p>
<ul>
<li>对于不是 <u>候选码</u> 的每个 <u>决定因子</u>，从关系模式中 <u>删去</u> 依赖于它的 <u>所有属性</u></li>
<li>新建一个关系模式， 新关系模式 中 <u>包含</u> 原关系模式 中 <u>所有</u> 依赖于 <u>该决定因子</u> 的 <u>属性</u></li>
<li>将决定因子作为新关系模式的主键</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210601211546539.png" srcset="/img/loading.gif" alt="image-20210601211546539" style="zoom:50%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210601211603811.png" srcset="/img/loading.gif" alt="image-20210601211603811 " style="zoom:50%;" />
</li>
</ul>
</li>
</ul>
</li>
<li><p>BC（Boyce-Codd） NF：</p>
<ul>
<li><p>第二范式和第三范式都是不允许存在对主键的部分依赖和传递依赖，并没有考虑对候选键的依赖问题。</p>
</li>
<li><p>如果只考虑对主键属性的依赖关系，则第三范式关系有可能存在会引起</p>
<p><u>数据冗余的函数依赖</u></p>
</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210601211818343.png" srcset="/img/loading.gif" alt="image-20210601211818343" style="zoom:50%;" />
</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210601211845524.png" srcset="/img/loading.gif" alt="image-20210601211845524" style="zoom:50%;" />
</li>
</ul>
</li>
</ul>
</li>
<li><p>规范化小结：</p>
<ul>
<li>规范化的基本思想：<ul>
<li>逐步消除数据依赖中不合适的部分，通过模式分解的方法使关系模式逐步消除操作异常。</li>
</ul>
</li>
<li>分解的基本思想：<ul>
<li>是让一个关系模式只描述一件事情，即面向主题设计数据库的关系模式。因此，规范化的过程就是让每个关系模式概念单一化的过程。</li>
</ul>
</li>
<li>规范化的方法：<ul>
<li>是模式分解，且确保分解后产生的模式与原模式等价。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-关系模式分解准则"><a href="#3-关系模式分解准则" class="headerlink" title="3. 关系模式分解准则"></a>3. 关系模式分解准则</h3><ul>
<li>模式分解应该满足<ul>
<li>模式分解具有无损连接性</li>
<li>模式分解能保证函数依赖</li>
</ul>
</li>
</ul>
<h2 id="第九章-数据库设计"><a href="#第九章-数据库设计" class="headerlink" title="第九章 数据库设计"></a>第九章 数据库设计</h2><h3 id="1-数据库设计特点"><a href="#1-数据库设计特点" class="headerlink" title="1. 数据库设计特点"></a>1. 数据库设计特点</h3><ul>
<li>基本步骤：<ul>
<li>需求分析</li>
<li>结构设计</li>
<li>行为设计</li>
<li>数据库实施</li>
<li>数据库运行和维护</li>
</ul>
</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602203940633.png" srcset="/img/loading.gif" alt="image-20210602203940633" style="zoom:80%;" /></li>
<li>局部E-R图设计：<ul>
<li>实体 和 属性 是 <u>相对</u> 而言的，需要根据实际情况进行调整</li>
<li>关系数据库 <u>基本原则</u>：<ul>
<li>实体具有描述信息， 属性没有</li>
</ul>
</li>
</ul>
</li>
<li>设计示例：<ul>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602205533374.png" srcset="/img/loading.gif" alt="image-20210602205533374" style="zoom:80%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602205556900.png" srcset="/img/loading.gif" alt="image-20210602205556900" style="zoom:80%;" /><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210602205645320.png" srcset="/img/loading.gif" alt="image-20210602205645320"></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602205645320.png" srcset="/img/loading.gif" alt="image-20210602205645320" style="zoom:80%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602205828263.png" srcset="/img/loading.gif" alt="image-20210602205828263" style="zoom:80%;" /></li>
</ul>
</li>
<li>设计全局E-R模型<ul>
<li>将局部E-R图集转为全局</li>
<li>需消除各分E-R图合并时产生的冲突<ul>
<li>属性：<ul>
<li>属性域冲突（类型、取值范围、取值集合）<ul>
<li>部门编号 （字符 - 数值）</li>
<li>年龄描述 （定义为出生日期 - 定义为整数）</li>
</ul>
</li>
<li>属性取值单位冲突：<ul>
<li>身高，有的用m 有的用 cm</li>
</ul>
</li>
</ul>
</li>
<li>命名<ul>
<li>同名异义：<ul>
<li>不同实体名、联系名、属性名在不同的局部E-R图中有相同的名字</li>
</ul>
</li>
<li>异名同义：<ul>
<li>相同实体名、联系名、属性名在不同的局部E-R图中有不同的名字</li>
</ul>
</li>
<li>属性冲突和命名冲突通常可用通过讨论、协商解决</li>
</ul>
</li>
<li>结构<ul>
<li>同一对象在不同局部E-R图中有不同的抽象<ul>
<li>把属性和实体相互转换，是同样对象具有相同抽象</li>
</ul>
</li>
<li>统一实体在不同的局部E-R图中所包含的属性个数不完全相同<ul>
<li>solve：取并集</li>
</ul>
</li>
</ul>
</li>
<li><strong>find_example:  p300</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-逻辑结构设计"><a href="#2-逻辑结构设计" class="headerlink" title="2. 逻辑结构设计"></a>2. 逻辑结构设计</h3><ul>
<li>把概念结构设计阶段设计好的E-R模型转换为具体的数据库管理系统支持的数据模型，这些模式在功能、性能、完整性和一致性约束方面满足应用要求。</li>
<li>步骤：<ul>
<li>将概念模型转换为某种逻辑数据模型</li>
<li>对数据模型进行优化</li>
</ul>
</li>
<li>E-R模型向关系模型的转换：<ul>
<li>一个实体转换为一个关系模式。实体的属性就是关系的属性，实体的标识符就是关系的码。</li>
<li>实体间联系分情况处理<ul>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211129285.png" srcset="/img/loading.gif" alt="image-20210602211129285" style="zoom:67%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211200365.png" srcset="/img/loading.gif" alt="image-20210602211200365" style="zoom:67%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211217225.png" srcset="/img/loading.gif" alt="image-20210602211217225" style="zoom:67%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211233985.png" srcset="/img/loading.gif" alt="image-20210602211233985" style="zoom:67%;" /><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210602211247210.png" srcset="/img/loading.gif" alt="image-20210602211247210"></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211247210.png" srcset="/img/loading.gif" alt="image-20210602211247210" style="zoom:67%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211325021.png" srcset="/img/loading.gif" alt="image-20210602211325021" style="zoom:67%;" /></li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211348608.png" srcset="/img/loading.gif" alt="image-20210602211348608" style="zoom:67%;" />

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第十章-安全管理"><a href="#第十章-安全管理" class="headerlink" title="第十章 安全管理"></a>第十章 安全管理</h2><h3 id="1-安全控制"><a href="#1-安全控制" class="headerlink" title="1. 安全控制"></a>1. 安全控制</h3><ul>
<li><p>安全控制：</p>
<ul>
<li>在数据库应用系统中不同层次提供对有意损害行为的安全防范</li>
</ul>
</li>
<li><p>安全控制模型：</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210602211616781.png" srcset="/img/loading.gif" alt="image-20210602211616781"></p>
</li>
<li><p>授权和认证：</p>
<ul>
<li>授权：<ul>
<li>将合法访问数据库或数据库对象的权限授予用户的过程</li>
</ul>
</li>
<li>认证：<ul>
<li>一种鉴定用户身份的机制。即认证是检验用户实际是否被准许操作数据库</li>
</ul>
</li>
<li>认证最简单的形式：<ul>
<li>与数据库连接时提供用户名和密码</li>
</ul>
</li>
</ul>
</li>
<li><p>语句权限：</p>
<ul>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211908020.png" srcset="/img/loading.gif" alt="image-20210602211908020" style="zoom:67%;" />
</li>
</ul>
</li>
<li><p>对象权限：</p>
<ul>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602211939984.png" srcset="/img/loading.gif" alt="image-20210602211939984" style="zoom:67%;" />
</li>
<li><p>授权语句：</p>
<ul>
<li><p><strong>GRANT</strong> <strong>对象权限名</strong> <strong>[ , … ]</strong> </p>
<p> <strong>ON {</strong>表名 <strong>|</strong> <strong>视图名</strong> <strong>|</strong> <strong>存储过程名</strong>}</p>
<p> <strong>TO</strong> <strong>数据库用户名</strong> <strong>[ , … ]</strong></p>
<p> <strong>[WITH GRANT OPTION]</strong></p>
</li>
<li><p>例子： p319</p>
</li>
<li><p>（收权语句）</p>
<p><strong>REVOKE</strong> <strong>对象权限名</strong> <strong>[ , … ]</strong> </p>
<p> <strong>ON {</strong> <strong>表名</strong> <strong>|</strong> <strong>视图名</strong> <strong>|</strong> <strong>存储过程名</strong> <strong>}</strong></p>
<p> <strong>FROM</strong> <strong>数据库用户名</strong>[ , … ]</p>
</li>
<li><p>（拒绝语句）</p>
<p><strong>DENY</strong> <strong>对象权限名</strong> <strong>[, … ]</strong> </p>
<p> <strong>ON {</strong>表名 <strong>|</strong> <strong>视图名</strong> <strong>|</strong> <strong>存储过程名</strong>}</p>
<p> <strong>TO</strong> <strong>数据库用户名</strong> <strong>[ , … ]</strong></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-审计跟踪"><a href="#2-审计跟踪" class="headerlink" title="2. 审计跟踪"></a>2. 审计跟踪</h3><ul>
<li>审计跟踪实质上是一种特殊的文件或数据库，系统在上面自动记录下用户对常规数据的所有操作。</li>
<li>它记录对数据库的所有修改（如更新、删除、插入等）日志，包括何时由何人修改等信息。</li>
</ul>
<h3 id="3-SQL-Server安全控制"><a href="#3-SQL-Server安全控制" class="headerlink" title="3. SQL Server安全控制"></a>3. SQL Server安全控制</h3><ul>
<li><p>大型DBMS自主存取控制模式中，用户访问数据库数据需要经过</p>
<p>三个 <u>安全认证过程</u></p>
<ul>
<li>确认用户是否是 <u>数据库服务器</u> 的合法用户（登录名）</li>
<li>确认用户是否是要访问 <u>数据库</u> 的合法用户（数据库用户）</li>
<li>确认用户是否具有合适操作权限（权限认证）</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210602213219273.png" srcset="/img/loading.gif" alt="image-20210602213219273"></p>
</li>
</ul>
<h3 id="4-登录名"><a href="#4-登录名" class="headerlink" title="4. 登录名"></a>4. 登录名</h3><ul>
<li>SQL Server 2008的安全权限是基于标识用户身份的登录标识符（Login ID，登录ID），登录ID就是控制访问SQL Server 数据库服务器的登录名。</li>
<li><strong>SQL Server 2008</strong>支持两类登录名 ：<ul>
<li>由SQL Server负责验证的登录名</li>
<li>Windows网络账户，可以是组用户</li>
</ul>
</li>
<li><strong>SQL Server 2008</strong>提供了两种身份验证模式<ul>
<li>Windows身份验证模式<ul>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602213510631.png" srcset="/img/loading.gif" alt="image-20210602213510631" style="zoom:80%;" /></li>
</ul>
</li>
<li>混合验证模式<ul>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210602213533681.png" srcset="/img/loading.gif" alt="image-20210602213533681" style="zoom:80%;" />



</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="第十一章-事务与并发控制"><a href="#第十一章-事务与并发控制" class="headerlink" title="第十一章 事务与并发控制"></a>第十一章 事务与并发控制</h2><h3 id="1-事物基本概念"><a href="#1-事物基本概念" class="headerlink" title="1. 事物基本概念"></a>1. 事物基本概念</h3><ul>
<li>事务是 用户定义的数据操作系列，这些操作作为一个完整的工作单元，一个事务内 的所有语句被作为一个整体，要么全部执行，要么全部不执行。</li>
<li>例如：对于一个转帐活动：A帐户转帐给B帐户2000元钱，这个活动包含两个操作：<ul>
<li>第一个：A - 2000</li>
<li>第二个：B - 2000</li>
</ul>
</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210603090630150.png" srcset="/img/loading.gif" alt="image-20210603090630150" style="zoom:80%;" />

</li>
</ul>
<h3 id="2-事务的特性"><a href="#2-事务的特性" class="headerlink" title="2. 事务的特性"></a>2. 事务的特性</h3><ul>
<li><p>原子性：</p>
<ul>
<li><p>指事务是数据库的 <u>逻辑工作单位</u>，</p>
<p>事务中的操作 <u>要么都做</u>，<u>要么多不做</u></p>
</li>
<li><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603091211903.png" srcset="/img/loading.gif" alt="image-20210603091211903"></p>
</li>
</ul>
</li>
<li><p>一致性： </p>
<ul>
<li>指事务执行的结果必须时使数据库从一个一致性状态变到另一个一致性状态</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603091230551.png" srcset="/img/loading.gif" alt="image-20210603091230551"></li>
</ul>
</li>
<li><p>隔离性：</p>
<ul>
<li>指数据库中一个事务的执行 <u>不能被</u> 其它事务 <u>干扰</u></li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603091249659.png" srcset="/img/loading.gif" alt="image-20210603091249659"></li>
</ul>
</li>
<li><p>持久性： </p>
<ul>
<li>指事务 <u>一旦提交</u>，其对数据库 <u>数据的改变是永久的</u></li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603091307558.png" srcset="/img/loading.gif" alt="image-20210603091307558"></li>
</ul>
</li>
<li><p>事务时数据库并发控制和恢复的基本单位</p>
</li>
<li><p>保证事务的ACID特性时事务处理的重要任务</p>
</li>
<li><p>ACID特性可能遭到破坏和因素有：</p>
<ul>
<li>多个事务并行运行时，不同事务的操作有交叉情况</li>
<li>事务在运行过程中被强迫停止</li>
</ul>
</li>
</ul>
<h3 id="3-事务处理模型"><a href="#3-事务处理模型" class="headerlink" title="3. 事务处理模型"></a>3. 事务处理模型</h3><ul>
<li><p>COMMIT和ROLLBACK用于提供对事物的支持</p>
</li>
<li><p>当开始一个事务后，系统必须连续的执行全部后续SQL语句，直到出现下列四个事件之一：</p>
<ul>
<li>到达了COMMIT语句</li>
<li>到达了ROLLBACK语句</li>
<li>成功地到达了程序的结束</li>
<li>程序被异常终止了</li>
</ul>
</li>
<li><p>T-SQL事务处理模型</p>
<ul>
<li><p>每个事务都有显式的开始和结束标记</p>
</li>
<li><p>事务开始标记：</p>
<p>​    <strong>BEGIN TRANSACTION | TRAN</strong></p>
<p><strong>BEGIN TRANSACTION</strong> </p>
<p><strong>UPDATE</strong> <strong>支付表</strong> <strong>SET</strong> <strong>帐户总额</strong>=<strong>帐户总额</strong> <strong>- 2000</strong></p>
<pre><code>**WHERE** **帐户号** **= ‘A’**</code></pre><p><strong>UPDATE</strong> <strong>支付表</strong> <strong>SET</strong> <strong>帐户总额</strong>=<strong>帐户总额</strong> <strong>+ 2000</strong></p>
<p>​     <strong>WHERE</strong> <strong>帐户号</strong> <strong>= ‘B’</strong></p>
<p><strong>COMMIT</strong> </p>
</li>
</ul>
</li>
</ul>
<h3 id="4-事务日志"><a href="#4-事务日志" class="headerlink" title="4. 事务日志"></a>4. 事务日志</h3><ul>
<li><p>为支持事务处理，DBMS对数据库所做的每个更改操作都维护一个事务记录，并保存到事务日志中</p>
</li>
<li><p>DBMS用事务日志来跟踪所有影响数据库值的操作，以使DBMS能够从由事务引起的失败中恢复数据库</p>
</li>
<li><p>当执行有更改数据库操作的事务时，DBMS自动更改事务日志，并在事务日志中存储数据库被更改之前和更改之后的数据，以及所有参与到事务中的表、行和属性值。</p>
</li>
<li><p>事务的开始和结束（COMMIT）也记录在事务日志中。</p>
</li>
<li><img src="C:\Users\25357\AppData\Roaming\Typora\typora-user-images\image-20210603092421356.png" srcset="/img/loading.gif" alt="image-20210603092421356" style="zoom:67%;" />

</li>
</ul>
<h3 id="5-并发控制"><a href="#5-并发控制" class="headerlink" title="5. 并发控制"></a>5. 并发控制</h3><ul>
<li><p>概述：<br><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603092519371.png" srcset="/img/loading.gif" alt="image-20210603092519371"></p>
</li>
<li><p>并发操作所带来的数据不一致情况大致为四种：</p>
<ul>
<li>丢失修改<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603092718772.png" srcset="/img/loading.gif" alt="image-20210603092718772"></li>
</ul>
</li>
<li>不可重复读<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603092735972.png" srcset="/img/loading.gif" alt="image-20210603092735972"></li>
</ul>
</li>
<li>读“脏”数据<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603092755439.png" srcset="/img/loading.gif" alt="image-20210603092755439"></li>
</ul>
</li>
<li>产生“幽灵”数据<ul>
<li>属于不可重复读的范畴</li>
<li>指事务T1按一定条件从数据库种读取了某些数据记录后，事物T2删除了其中的部分记录，或者在其中添加了部分记录当T1再次按照相同条件读数据时，发现其中少了（对删除）或者多了（对插入）一些记录</li>
<li>这样的数据对T1拉手就是“幽灵”数据或称“幻影”数据</li>
</ul>
</li>
</ul>
</li>
<li><p>并发控制种的加锁：</p>
<ul>
<li><p>进行并发控制的主要方式时使用封锁机制，即加锁</p>
</li>
<li><p>锁时与数据项有关的一个变量，它描述了数据项的状态，这个状态时关于在数据项上课进行的操作</p>
</li>
<li><p>并发控制最常用技术——加锁</p>
</li>
<li><p>锁的类型：</p>
<ul>
<li>排他锁（X锁、写锁）<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603093338564.png" srcset="/img/loading.gif" alt="image-20210603093338564"></li>
</ul>
</li>
<li>共享锁（S锁、读锁）<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603093355331.png" srcset="/img/loading.gif" alt="image-20210603093355331"></li>
</ul>
</li>
<li>锁的相容性矩阵：<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603093441133.png" srcset="/img/loading.gif" alt="image-20210603093441133"></li>
</ul>
</li>
</ul>
</li>
<li><p>锁的粒度：</p>
<ul>
<li>粒度：由并发控制程序选择的作为保护单位的数据项大小。</li>
<li>主要的加锁粒度：<ul>
<li>数据库级： 对整个数据库加锁</li>
<li>表级：对整张表加锁</li>
<li>页级（最常用）：对以恶数据页加锁</li>
<li>行（元组）级：对特定的行加锁</li>
<li>属性（字段）级：对特定的属性加锁</li>
</ul>
</li>
</ul>
</li>
<li><p>封锁协议：</p>
<ul>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210603094334305.png" srcset="/img/loading.gif" alt="image-20210603094334305"></li>
</ul>
</li>
<li><p>一级封锁协议</p>
<ul>
<li><p>对事物T要修改的数据加X锁，直到事物结束（包括正常和非正常结束）时才释放</p>
</li>
<li><p>一级封锁协议可以防止丢失修改，并保证事物T时可恢复的</p>
</li>
<li><p>但不能保证课重复度和不读”脏“数据</p>
</li>
<li><p>示例：</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606214218341.png" srcset="/img/loading.gif" alt="image-20210606214218341"></p>
</li>
</ul>
</li>
<li><p>二级封锁协议</p>
<ul>
<li><p>一级封锁协议加上对事物T对要读取的数据加S锁，读完后即释放S锁</p>
</li>
<li><p>还可防止读”脏“数据</p>
</li>
<li><p>示例</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606214427915.png" srcset="/img/loading.gif" alt="image-20210606214427915"></p>
</li>
</ul>
</li>
<li><p>三级封锁协议</p>
<ul>
<li>以及封锁协议加上事物T对要读取的数据加S锁，并直到事物结束才释放。</li>
<li>还可以防止不可重复读</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606214637602.png" srcset="/img/loading.gif" alt="image-20210606214637602"></li>
</ul>
</li>
<li><p>总结：</p>
</li>
<li><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606214657107.png" srcset="/img/loading.gif" alt="image-20210606214657107"></p>
</li>
<li><p>活锁和死锁</p>
<ul>
<li>和操作系统一样，并发控制的封锁方法可能导致活锁和死锁</li>
<li>活锁</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606214950477.png" srcset="/img/loading.gif" alt="image-20210606214950477"></li>
<li>避免活锁<ul>
<li>采用先来先服务策略</li>
<li>当多个事务请求封锁同一数据对象时，数据库管理系统按先请求先满足的事务排队策略，当数据对象上的锁被释放后，让事务队列中第一个事务获得锁</li>
</ul>
</li>
<li>死锁</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606215825457.png" srcset="/img/loading.gif" alt="image-20210606215825457"></li>
<li>预防死锁<ul>
<li>一次封锁法</li>
<li>顺序封锁法</li>
</ul>
</li>
<li>死锁的诊断与解除<ul>
<li>超时法</li>
<li>事务等待图法</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>两阶段锁</p>
<ul>
<li>DBMS对并发事务中的操作的调度时随机的</li>
<li>如果多个事务在某个调度下的执行结果与这些事务在某个串行调度下的执行结果相同，那么这个调度就颐堤港是正确的</li>
<li>两阶段锁中，所有的加锁操作都在第一个解锁操作之前完成</li>
<li>两阶段锁是用于维护级别3一致性使用的标准协议</li>
<li>两阶段锁定义了事务如何获取和释放锁，基本的规则就是在事务已经释放了锁之后就不能再获得任何其他的锁</li>
<li><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606221940620.png" srcset="/img/loading.gif" alt="image-20210606221940620"></li>
</ul>
</li>
</ul>
<h2 id="第十二章-数据库恢复技术"><a href="#第十二章-数据库恢复技术" class="headerlink" title="第十二章 数据库恢复技术"></a>第十二章 数据库恢复技术</h2><h3 id="1-恢复的基本概念"><a href="#1-恢复的基本概念" class="headerlink" title="1. 恢复的基本概念"></a>1. 恢复的基本概念</h3><ul>
<li>数据库恢复是指当数据库发生故障时，将数据库恢复到正确（一致性）状态的过程。</li>
<li>数据库恢复时基于事务的原子性</li>
<li>数据恢复过程通常遵循一个可预测方案</li>
<li>恢复机制由两个关键问题：<ul>
<li>如何建立备份数据</li>
<li>如何利用备份数据进行恢复</li>
</ul>
</li>
</ul>
<h3 id="2-数据转储"><a href="#2-数据转储" class="headerlink" title="2. 数据转储"></a>2. 数据转储</h3><ul>
<li>数据库恢复采用的基本技术：数据转储（也称为数据库备份）。</li>
<li>转储就是定期地将整个数据库复制到辅助存储设备上，比如磁带、磁盘。</li>
<li>数据转储只能将数据库恢复到转储时的状态。如果想恢复到故障发生时的状态，则必须利用转储之后的事务日志。</li>
<li>静态转储<ul>
<li>再系统中无运行事务时进行</li>
<li>再转储期间不允许对数据库进行任何操作</li>
</ul>
</li>
<li>动态转储<ul>
<li>不用等在正在运行的事务结束</li>
<li>再转储期间允许运行新的事物</li>
</ul>
</li>
</ul>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606222446078.png" srcset="/img/loading.gif" alt="image-20210606222446078"></p>
<h3 id="3-数据库故障种类"><a href="#3-数据库故障种类" class="headerlink" title="3. 数据库故障种类"></a>3. 数据库故障种类</h3><ul>
<li><p>数据库故障是指导致数据库值出现错误描述状态的情况</p>
</li>
<li><p>事务故障</p>
<ul>
<li>意味着事务没有到达终点，数据库可能正处于不正确状态</li>
<li>数据库的恢复机制要再不影响其他事务运行的情况下，强行撤销该事务中的全部操作</li>
<li>——&gt; 事务撤销</li>
</ul>
</li>
<li><p>影响数据库运行的故障有多种</p>
<ul>
<li><p>事物内部的故障</p>
<ul>
<li><p>可预期的</p>
<ul>
<li>这类故障可通过事物程序本身发现</li>
<li>如银行转账事物中，如A账户金额不足，则不能进行转账</li>
</ul>
</li>
<li><p>非预期的</p>
<ul>
<li><p>这类故障不能由应用程序处理</p>
</li>
<li><p>如运算溢出或因死锁二被撤销的事务</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>系统故障</p>
<ul>
<li><p>造成系统停止运转、系统要重启的故障：</p>
<ul>
<li>硬件错误（CPU故障）</li>
<li>操作系统故障</li>
<li>突然停电</li>
</ul>
</li>
<li><p>这类故障会影响正在运行的所有事务，但不会破坏数据库</p>
</li>
<li><p>产生的结果：</p>
<ul>
<li>一些未完成事务的结果可能已经送入物理数据库中，从而造成数据库可能处于不正确状态</li>
<li>有些已经提交的事务可能有一部分结果还保留在缓冲区中，尚未写到物理数据库中，因此会丢失这些事务对数据的修改，使数据库处于不一致状态</li>
</ul>
</li>
<li><p>恢复方法</p>
<ul>
<li>恢复子系统在系统重新启动时必须：<ul>
<li>撤销所有未完成的事务</li>
<li>重做所有已提交的事务</li>
</ul>
</li>
<li>从而保证将数据库恢复到一致状态</li>
</ul>
</li>
<li><p>故障对数据库的影响：</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607090622273.png" srcset="/img/loading.gif" alt="image-20210607090622273"></p>
</li>
</ul>
</li>
<li><p>其他故障</p>
</li>
</ul>
<h3 id="4-数据库恢复的类型"><a href="#4-数据库恢复的类型" class="headerlink" title="4. 数据库恢复的类型"></a>4. 数据库恢复的类型</h3><ul>
<li><p>无论出现何种类型的故障，都必须终止或提交事务，以维护数据完整性</p>
</li>
<li><p>事务恢复类型：</p>
<ul>
<li><p>向前恢复</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607091932816.png" srcset="/img/loading.gif" alt="image-20210607091932816"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607091953948.png" srcset="/img/loading.gif" alt="image-20210607091953948"></p>
<p>重做事务：</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607092013887.png" srcset="/img/loading.gif" alt="image-20210607092013887"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607092028162.png" srcset="/img/loading.gif" alt="image-20210607092028162"></p>
</li>
<li><p>向后恢复</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607092044451.png" srcset="/img/loading.gif" alt="image-20210607092044451"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607092056267.png" srcset="/img/loading.gif" alt="image-20210607092056267"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607092108372.png" srcset="/img/loading.gif" alt="image-20210607092108372"></p>
</li>
</ul>
</li>
<li><p>介质故障恢复</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607092138104.png" srcset="/img/loading.gif" alt="image-20210607092138104"></p>
</li>
<li><p>故障恢复过程</p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607095752801.png" srcset="/img/loading.gif" alt="image-20210607095752801"></p>
</li>
</ul>
<h3 id="5-恢复技术"><a href="#5-恢复技术" class="headerlink" title="5. 恢复技术"></a>5. 恢复技术</h3><ul>
<li><p>恢复技术依赖于数据库损坏的类型和程度</p>
</li>
<li><p>基本原则使事务的所有操作必须作为一各逻辑工作单元来对待，并且要保证数据库的一致性</p>
</li>
<li><p>数据库损坏的类型</p>
<ul>
<li>物理损坏</li>
<li>非物理或事物故障</li>
</ul>
</li>
<li><p>事物故障</p>
<ul>
<li><p>需要撤销（回滚）引起不一致的修改</p>
</li>
<li><p>为确保更新已到达物理存储设备，有必要 <u>重做</u>（前滚）一些事物</p>
</li>
<li><p>通过使用事物日志文件中更新前的值（前向）和更新后的值（后像），使数据库恢复到一致性的状态。这种技术也称：</p>
<p>基于日志的恢复技术</p>
<ul>
<li>延迟更新<ul>
<li>只有倒带事物的提交点，更新才被写入数据库</li>
<li>数据库的更新要延迟到事物执行成功并提交时</li>
<li>事物执行过程中，更新只被记录在事物日志和缓冲区中。当事物提交后，更新被记录到数据库</li>
<li>如果一个事物在到达提交点之前出现故障，将不会修改数据库，因此没必要进行撤销操作</li>
<li>但如果发生故障时事物的更新还未写入到数据库，则必须重做已提交事务的更新</li>
</ul>
</li>
<li>立即更新<ul>
<li>更新一旦发生即被施加到数据库中，二无需等到事务提交点以及所有的更改被保存在事务日志时</li>
<li>除了需要重做故障之前已提交的事务所做的更改外，还需要撤销当故障发生时仍未提交的事务锁造成的影响</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6-检查点技术"><a href="#6-检查点技术" class="headerlink" title="6. 检查点技术"></a>6. 检查点技术</h3><p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607100744177.png" srcset="/img/loading.gif" alt="image-20210607100744177"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607100815368.png" srcset="/img/loading.gif" alt="image-20210607100815368"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607100832911.png" srcset="/img/loading.gif" alt="image-20210607100832911"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607100856602.png" srcset="/img/loading.gif" alt="image-20210607100856602"></p>
<p><img src="C:%5CUsers%5C25357%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210607100913674.png" srcset="/img/loading.gif" alt="image-20210607100913674"></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/04/25/%E6%B5%86%E6%9E%9C%E5%92%8CYOLO/">
                        <span class="hidden-mobile">浆果和YOLO</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>















<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"position":"right","width":145,"height":315},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>
</html>
